{% extends "base.html" %}
{% block body %}
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/alpinejs"></script>
<main class="main">
    <form
        hx-post="{% url 'add_cart' %}"
        hx-swap="none"
        hx-trigger="submit"
    >
        {% csrf_token %}
        <div class="mb-30 container">
            <div class="row">
                <div class="m-auto col-lg-12 col-xl-11">
                    <div class="row">
                        <div class="col-xl-9">
                            <div class="accordion-detail product-detail">
                                <div class="mt-30 mb-50 row">
                                    <div class="mb-md-0 mb-sm-5 col-md-6 col-xl-9 col-xs-12">
                                        <div class="detail-gallery">
                                            <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                                            <!-- MAIN SLIDES -->
                                            <div class="product-image-slider">
                                                <figure class="border-radius-10">
                                                    <img
                                                        src="{{product.image.url}}"
                                                        alt="product image"
                                                    />
                                                </figure>
                                            </div>
                                        </div>
                                        <!-- End Gallery -->
                                    </div>
                                    <h2 class="font-bold text-3xl title-detail">{{product.name}}</h2>
                                    <div class="clearfix product-price-cover">
                                        <div class="float-left primary-color product-price">
                                            <h3> <span
                                                    class="font-semibold text-2xl text-brand current-price">{{product.price}}
                                                    €
                                                </span>
                                            </h3>
                                        </div>
                                    </div>
                                </div>
                                <input
                                    type="hidden"
                                    name="product"
                                    value="{{product.id}}"
                                    id="{{product.id}}"
                                >
                                <div class="p-5 card col-xl-9">
                                    <h5 class="mb-30">Variation</h5>
                                    {% for variation in product.variations.all %}
                                    <div class="d-flex">
                                        <div class="mr-80 custome-checkbox">
                                            <input
                                                class="form-check-input"
                                                type="checkbox"
                                                id="{{variation.id}}"
                                                name="variations[]"
                                                value="{{variation.id}}"
                                            />
                                            <label
                                                class="form-check-label"
                                                for="{{variation.id}}"
                                            >
                                                <span class="font-weight-bold">{{variation.name}}</span>
                                                <span class="m-2"> + {{variation.price}} €</span>
                                            </label>
                                            <br />
                                        </div>

                                    </div>
                                    {% endfor %}
                                </div>
                                <div class="col-sm-12 col-md-6 col-xs-12">
                                    <div class="pr-30 pl-30 detail-info">

                                        <div class="mb-30 short-desc">
                                            <p class="font-lg">{{product.description}}</p>
                                        </div>
                                        <div class="mb-50 detail-extralink">
                                            {% comment %} <div class="border detail-qty radius">
                                                <select
                                                    name="</a>"
                                                    id="select"
                                                >
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                    <option value="6">6</option>
                                                    <option value="7">7</option>
                                                    <option value="8">8</option>
                                                </select>
                                                <!-- <a
                                                    href="#"
                                                    class="qty-down"
                                                ><i class="fi-rs-angle-small-down"></i></a>
                                                <span class="qty-val">1</span>
                                                <a
                                                    href="#"
                                                    class="qty-up"
                                                ><i class="fi-rs-angle-small-up"></i></a> -->
                                            </div> {% endcomment %}
                                            <div class="product-extra-link2">
                                                <div x-data="{ showNotification: false }">
                                                    <button
                                                        @click="showNotification = true; setTimeout(() => showNotification = false, 1000)"
                                                        type="submit"
                                                        id="add-button"
                                                        class="button-add-to-cart button"
                                                    ><i class="fi-rs-shopping-cart"></i>Hinzufügen</button>

                                                    <div
                                                        x-show="showNotification"
                                                        x-transition:enter="transition ease-out duration-300"
                                                        x-transition:enter-start="opacity-0 translate-x-4"
                                                        x-transition:enter-end="opacity-100 translate-x-0"
                                                        x-transition:leave="transition ease-in duration-300"
                                                        x-transition:leave-start="opacity-100 translate-x-0"
                                                        x-transition:leave-end="opacity-0 translate-x-4"
                                                        class="top-4 right-4 fixed bg-green-500 shadow-md px-4 py-3 rounded-md text-white"
                                                    >
                                                        This is a notification!
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <!-- Detail Info -->
                                </div>
                            </div>
                        </div>

                        <div class="sticky-sidebar mt-30 col-xl-3 primary-sidebar">
                            <div class="mb-30 sidebar-widget widget-category-2">
                                <h5 class="mb-30 section-title style-1">Andere Kategorien</h5>
                                <ul>
                                    {% for category in all_categories  %}

                                    <li>
                                        <a href="{% url 'category' category.id %}"> <img
                                                src="{% url 'category' product.category.id%}"
                                                alt=""
                                            />{{category.name}}</a><span class="count">30</span>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </form>

</main>
<script>
    const notificationElement = document.getElementById('notification');
    const notificationInstance = new bootstrap.Toast(notificationElement);

    document.getElementById('showNotificationBtn').addEventListener('click', () => {
        notificationInstance.show();
        setTimeout(() => {
            notificationInstance.hide();
        }, 500);
    });
</script>
{% endblock body %}